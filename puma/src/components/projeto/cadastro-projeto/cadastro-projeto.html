<div class="h-100" style="display: inline-table">
  <b-container fluid class="h-100">
    <div class='title'>
      {{ operacao === 'visualizar' ? 'Visualizar Projeto': (operacao === 'alterar' ? 'Alterar Projeto' : 'Cadastrar Projeto') }}
    </div>
    <ValidationObserver ref="observer" v-slot="{invalid}" @submit.prevent="onSubmit()">
      <b-row align-h="start" class="card">
        <b-col sm="6">
          <div class='forms'>
            <ValidationProvider rules="required|min:200" v-slot="v" :bails="false" name="desafio enfrentado">
              <div class="title-textarea">Desafio Enfrentado</div>
              <div class="error-div">
                <textarea
                  id="descricao"
                  placeholder="Descreva o desafio enfrentado usando, no mínimo, 200 caracteres."
                  maxlength="1000"
                  rows="7"
                  v-model="descricao.val"
                  v-bind:class="{ inputFieldRegisterProject: !v.errors.length && operacao !== 'visualizar' }"
                  v-bind:style="v.errors.length ? { borderColor: '#EB0600' } : {}"
                  :disabled=isLoading
                  class="input-field-register-project">
                </textarea>
                <span class="error-span" v-for="erro in v.errors">
                  {{ erro }}
                </span>
              </div>
            </ValidationProvider>
            <ValidationProvider rules="required" v-slot="v" :bails="false" name="resultado desejado">
              <div class="title-textarea">Resultado Desejado</div>
              <div class="error-div">
                <textarea id="resultado"
                          placeholder="Descreva os resultados desejados"
                          rows="5"
                          minlength="40"
                          maxlength="500"
                          v-model="resultadoEsperado.val"
                          v-bind:class="{ inputFieldRegisterProject: !v.errors.length && operacao !== 'visualizar' }"
                          v-bind:style="v.errors.length ? { borderColor: '#EB0600' } : {}"
                          :disabled=isLoading></textarea>
                <span class="error-span" v-for="erro in v.errors">
                  {{ erro }}
                </span>
              </div>
            </ValidationProvider>

            <ValidationProvider rules="required" v-slot="v" :bails="false" name="título">
              <div class="title-textarea">Título para o projeto</div>
              <div class="error-div">
                <input type="text"
                       id="titulo"
                       maxlength="100"
                       placeholder="Crie um título que indique o objetivo do projeto"
                       v-model="titulo.val"
                       v-bind:class="{ inputFieldRegisterProject: !v.errors.length && operacao !== 'visualizar' }"
                       v-bind:style="v.errors.length ? { borderColor: '#EB0600' } : {}"
                       :disabled=isLoading>
                <span class="error-span" v-for="erro in v.errors">
                  {{ erro }}
                </span>
              </div>
            </ValidationProvider>
            <div class="text-description">Evite título que comece com verbo, opte por substantivo</div>
            <div class="text-example">Exemplo: Eliminação do despedício na produção de pães artesanais</div>
          </div>
        </b-col>
        <b-col sm="6">
          <div class="title-keywords">
            Palavras chaves
          </div>
          <div id="multiselect-div">
            <multiselect
              openDirection="bottom"
              selectLabel=""
              deselectLabel=""
              selectedLabel=""
              track-by="keywordid"
              label="keyword"
              :placeholder="multiSelectPlaceholder"
              v-model="keywordsSelected"
              @input="sortMultiselectLabels()"
              @close="isMultiselectTouched = true"
              :options="keywords"
              :max-height="150"
              :max="3"
              :loading="isLoadingKeywords"
              :disabled="isLoadingKeywords || !keywords.length || operacao === 'visualizar'"
              :multiple="true"
              :showLabels="true"
              :searchable="false"
              :closeOnSelect="false">
              <span style="display: block" class="checkbox-label" slot="option" slot-scope="scope">
                {{ scope.option.keyword }}
                <input class="test" type="checkbox" :checked="isChecked(scope.option)" @focus.prevent :key="scope.option.keywordid"/>
              </span>
            </multiselect>
          </div>
          <span v-if="isMultiselectTouched && !keywordsSelected.length" style="" class="text-keywords">Escolha no mínimo uma palavra-chave</span>
          <div class="btn-toolbar">
            <div class="form-row" v-if="operacao !== 'visualizar'">
              <input :value="operacao === 'editar' ? 'Editar' : 'Enviar'" v-if="!isLoading && operacao !== 'visualizar'" type="submit" class="btn btn-warning submit-btn" @click="onSubmit"/>
            </div>
            <b-button v-if="operacao !== 'visualizar'" href="/projetos" class="btn btn-warning submit-btn">CANCELAR</b-button>
          </div>
        </b-col>
      </b-row>
    </ValidationObserver>
  </b-container>
</div>
